{"version":3,"file":"Modal.js","sources":["../../src/Modal/Modal.tsx"],"sourcesContent":["import React from 'react'\n\nimport { ModalProps } from './Modal.types'\n\nimport Button from '../Button'\nimport ModalContent from './components/ModalContent'\nimport Portal from '../utils/Portal'\n\nimport './Modal.scss'\nimport { PREFIX_CLASS } from '../constants'\nimport { IconClose } from '../components/Icons'\n\nconst Modal: React.FC<ModalProps> = ({\n  title,\n  visible,\n  children,\n  width = 520,\n  onCancel,\n  onOk,\n  closable = true,\n  maskClosable = true,\n  confirmLoading,\n  footer,\n  okText = '确定',\n  cancelText = '取消',\n  getContainer = () => document.body,\n  prefixCls = PREFIX_CLASS,\n  ...props\n}) => {\n  const prefixClass = `${prefixCls}-modal`\n  const [primaryLoading, setPrimaryLoading] = React.useState(false)\n\n  const container = getContainer()\n\n  async function handleOk(\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) {\n    if (typeof onOk === 'function') {\n      try {\n        setPrimaryLoading(true)\n        await onOk(event)\n      } finally {\n        setPrimaryLoading(false)\n      }\n    }\n  }\n\n  function renderModal() {\n    return (\n      <ModalContent\n        width={width}\n        onClickMask={onCancel}\n        maskClosable={maskClosable}\n        prefixCls={prefixCls}\n        {...props}\n      >\n        {closable ? (\n          <div className={`${prefixClass}-close-btn`} onClick={onCancel}>\n            <span className={`${prefixClass}-close`}>\n              <IconClose className={`${prefixClass}-close-icon`} />\n            </span>\n          </div>\n        ) : null}\n        {title ? <div className={`${prefixClass}-header`}>{title}</div> : null}\n        <div className={`${prefixClass}-body`}>{children}</div>\n        {footer === null ? null : (\n          <div className={`${prefixClass}-footer`}>\n            {footer || (\n              <>\n                <Button onClick={onCancel} className={`${prefixClass}-opt-btn`}>\n                  {cancelText}\n                </Button>\n                <Button\n                  onClick={handleOk}\n                  className={`${prefixClass}-opt-btn`}\n                  type=\"primary\"\n                  loading={primaryLoading || confirmLoading}\n                >\n                  {okText}\n                </Button>\n              </>\n            )}\n          </div>\n        )}\n      </ModalContent>\n    )\n  }\n\n  if (!visible) {\n    return null\n  }\n\n  return <Portal getContainer={() => container}>{renderModal()}</Portal>\n}\n\nexport default Modal\n"],"names":["PREFIX_CLASS","React","_jsxs","ModalContent","_jsx","Button"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,IAAM,KAAK,GAAyB,UAAC,EAgBpC;IAfC,IAAA,KAAK,WAAA,EACL,OAAO,aAAA,EACP,QAAQ,cAAA,EACR,aAAW,EAAX,KAAK,mBAAG,GAAG,KAAA,EACX,QAAQ,cAAA,EACR,IAAI,UAAA,EACJ,gBAAe,EAAf,QAAQ,mBAAG,IAAI,KAAA,EACf,oBAAmB,EAAnB,YAAY,mBAAG,IAAI,KAAA,EACnB,cAAc,oBAAA,EACd,MAAM,YAAA,EACN,cAAa,EAAb,MAAM,mBAAG,IAAI,KAAA,EACb,kBAAiB,EAAjB,UAAU,mBAAG,IAAI,KAAA,EACjB,oBAAkC,EAAlC,YAAY,mBAAG,cAAM,OAAA,QAAQ,CAAC,IAAI,GAAA,KAAA,EAClC,iBAAwB,EAAxB,SAAS,mBAAGA,kBAAY,KAAA,EACrB,KAAK,qBAf2B,0KAgBpC,CADS;IAER,IAAM,WAAW,GAAM,SAAS,WAAQ,CAAA;IAClC,IAAA,KAAsCC,cAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAA1D,cAAc,QAAA,EAAE,iBAAiB,QAAyB,CAAA;IAEjE,IAAM,SAAS,GAAG,YAAY,EAAE,CAAA;IAEhC,SAAe,QAAQ,CACrB,KAAsD;;;;;8BAElD,OAAO,IAAI,KAAK,UAAU,CAAA,EAA1B,wBAA0B;;;;wBAE1B,iBAAiB,CAAC,IAAI,CAAC,CAAA;wBACvB,qBAAM,IAAI,CAAC,KAAK,CAAC,EAAA;;wBAAjB,SAAiB,CAAA;;;wBAEjB,iBAAiB,CAAC,KAAK,CAAC,CAAA;;;;;;KAG7B;IAED,SAAS,WAAW;QAClB,QACEC,gBAACC,OAAY,oBACX,KAAK,EAAE,KAAK,EACZ,WAAW,EAAE,QAAQ,EACrB,YAAY,EAAE,YAAY,EAC1B,SAAS,EAAE,SAAS,IAChB,KAAK,eAER,QAAQ,IACPC,wCAAK,SAAS,EAAK,WAAW,eAAY,EAAE,OAAO,EAAE,QAAQ,gBAC3DA,yCAAM,SAAS,EAAK,WAAW,WAAQ,gBACrCA,eAAC,SAAS,IAAC,SAAS,EAAK,WAAW,gBAAa,WAAI,YAChD,YACH,IACJ,IAAI;gBACP,KAAK,GAAGA,wCAAK,SAAS,EAAK,WAAW,YAAS,gBAAG,KAAK,YAAO,GAAG,IAAI;gBACtEA,wCAAK,SAAS,EAAK,WAAW,UAAO,gBAAG,QAAQ,YAAO;gBACtD,MAAM,KAAK,IAAI,GAAG,IAAI,IACrBA,wCAAK,SAAS,EAAK,WAAW,YAAS,gBACpC,MAAM,KACLF,kDACEE,eAACC,OAAM,oBAAC,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAK,WAAW,aAAU,gBAC3D,UAAU,YACJ;4BACTD,eAACC,OAAM,oBACL,OAAO,EAAE,QAAQ,EACjB,SAAS,EAAK,WAAW,aAAU,EACnC,IAAI,EAAC,SAAS,EACd,OAAO,EAAE,cAAc,IAAI,cAAc,gBAExC,MAAM,YACA,YACR,CACJ,YACG,CACP,aACY,EAChB;KACF;IAED,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,IAAI,CAAA;KACZ;IAED,OAAOD,eAAC,MAAM,oBAAC,YAAY,EAAE,cAAM,OAAA,SAAS,GAAA,gBAAG,WAAW,EAAE,YAAU,CAAA;AACxE,CAAC;;;;"}