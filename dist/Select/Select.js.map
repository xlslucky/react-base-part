{"version":3,"file":"Select.js","sources":["../../src/Select/Select.tsx"],"sourcesContent":["import React from 'react'\nimport classnames from 'classnames'\n\nimport { SelectProps } from './Select.types'\n\nimport Trigger from '../Trigger'\n\nimport './Select.scss'\nimport '../style/animation/slide.scss'\nimport { PREFIX_CLASS } from '../constants'\nimport {\n  getOffsetByPlacement,\n  getSlideAnimationClassNames,\n} from '../utils/trigger'\nimport { IconArrowBottom } from '../components/Icons'\n\nconst Select: React.FC<SelectProps> = ({\n  value,\n  onChange,\n  className,\n  style,\n  children,\n  placeholder,\n  // TODO allowClear\n  // allowClear,\n  // TODO size\n  // size,\n  prefixCls = PREFIX_CLASS,\n}) => {\n  const prefixClass = `${prefixCls}-select`\n  const [enterClassName, leaveClassName] = getSlideAnimationClassNames(\n    'bottomLeft'\n  )\n\n  const [innerValue, setInnerValue] = React.useState<React.ReactText>()\n\n  React.useEffect(() => {\n    setInnerValue(value)\n  }, [value])\n\n  const selected = React.useMemo(() => {\n    const active = React.Children.toArray(children).find(\n      (item: any) => item.props.value === innerValue\n    )\n    if (active) {\n      return (active as React.ReactElement).props.children\n    }\n    return innerValue\n  }, [children, innerValue])\n\n  // function handleClear(e: React.MouseEvent<HTMLSpanElement, MouseEvent>) {\n  //   e.stopPropagation()\n  //   if (typeof onChange === 'function') {\n  //     onChange(undefined)\n  //   }\n  // }\n\n  const handleItem = (value: React.ReactText) => () => {\n    if (onChange) {\n      onChange(value)\n    }\n    setInnerValue(value)\n  }\n\n  return (\n    <Trigger\n      trigger={['click']}\n      placement=\"bottomLeft\"\n      stretch=\"width\"\n      enterClassName={enterClassName}\n      leaveClassName={leaveClassName}\n      offset={getOffsetByPlacement('bottomLeft', 4)}\n      clickPopupClose\n      popup={\n        <div className={`${prefixClass}-selection-wrapper`}>\n          <div className={`${prefixClass}-selection`}>\n            {React.Children.map(children, (option: React.ReactElement) => {\n              const { props } = option\n              const checked = innerValue === props.value\n              return React.cloneElement(option as React.ReactElement, {\n                ...props,\n                className: classnames(props.className, {\n                  [`${prefixClass}-selection-item-active`]: checked,\n                }),\n                onClick: handleItem(props.value),\n              })\n            })}\n          </div>\n        </div>\n      }\n    >\n      <div\n        className={classnames(`${prefixClass}-selector`, className)}\n        style={style}\n      >\n        <span className={`${prefixClass}-value`}>\n          {selected || (\n            <span className={`${prefixClass}-placeholder`}>{placeholder}</span>\n          )}\n        </span>\n        <span className={`${prefixClass}-opts`}>\n          <IconArrowBottom className={`${prefixClass}-arrow-icon`} />\n        </span>\n      </div>\n    </Trigger>\n  )\n}\n\nexport default Select\n"],"names":["PREFIX_CLASS","getSlideAnimationClassNames","React","_jsx","Trigger","getOffsetByPlacement","_jsxs"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAM,MAAM,GAA0B,UAAC,EAYtC;QAXC,KAAK,WAAA,EACL,QAAQ,cAAA,EACR,SAAS,eAAA,EACT,KAAK,WAAA,EACL,QAAQ,cAAA,EACR,WAAW,iBAAA;;;;;IAKX,iBAAwB;;;;;IAAxB,SAAS,mBAAGA,kBAAY,KAAA;IAExB,IAAM,WAAW,GAAM,SAAS,YAAS,CAAA;IACnC,IAAA,KAAmCC,mCAA2B,CAClE,YAAY,CACb,EAFM,cAAc,QAAA,EAAE,cAAc,QAEpC,CAAA;IAEK,IAAA,KAA8BC,cAAK,CAAC,QAAQ,EAAmB,EAA9D,UAAU,QAAA,EAAE,aAAa,QAAqC,CAAA;IAErEA,cAAK,CAAC,SAAS,CAAC;QACd,aAAa,CAAC,KAAK,CAAC,CAAA;KACrB,EAAE,CAAC,KAAK,CAAC,CAAC,CAAA;IAEX,IAAM,QAAQ,GAAGA,cAAK,CAAC,OAAO,CAAC;QAC7B,IAAM,MAAM,GAAGA,cAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAClD,UAAC,IAAS,IAAK,OAAA,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,UAAU,GAAA,CAC/C,CAAA;QACD,IAAI,MAAM,EAAE;YACV,OAAQ,MAA6B,CAAC,KAAK,CAAC,QAAQ,CAAA;SACrD;QACD,OAAO,UAAU,CAAA;KAClB,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAA;;;;;;;IAS1B,IAAM,UAAU,GAAG,UAAC,KAAsB,IAAK,OAAA;QAC7C,IAAI,QAAQ,EAAE;YACZ,QAAQ,CAAC,KAAK,CAAC,CAAA;SAChB;QACD,aAAa,CAAC,KAAK,CAAC,CAAA;KACrB,GAAA,CAAA;IAED,QACEC,eAACC,OAAO,oBACN,OAAO,EAAE,CAAC,OAAO,CAAC,EAClB,SAAS,EAAC,YAAY,EACtB,OAAO,EAAC,OAAO,EACf,cAAc,EAAE,cAAc,EAC9B,cAAc,EAAE,cAAc,EAC9B,MAAM,EAAEC,4BAAoB,CAAC,YAAY,EAAE,CAAC,CAAC,EAC7C,eAAe,QACf,KAAK,EACHF,wCAAK,SAAS,EAAK,WAAW,uBAAoB,gBAChDA,wCAAK,SAAS,EAAK,WAAW,eAAY,gBACvCD,cAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAC,MAA0B;;oBAC/C,IAAA,KAAK,GAAK,MAAM,MAAX,CAAW;oBACxB,IAAM,OAAO,GAAG,UAAU,KAAK,KAAK,CAAC,KAAK,CAAA;oBAC1C,OAAOA,cAAK,CAAC,YAAY,CAAC,MAA4B,sCACjD,KAAK,KACR,SAAS,EAAE,UAAU,CAAC,KAAK,CAAC,SAAS;4BACnC,GAAI,WAAW,2BAAwB,IAAG,OAAO;gCACjD,EACF,OAAO,EAAE,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAChC,CAAA;iBACH,CAAC,YACE,YACF,gBAGRI,yCACE,SAAS,EAAE,UAAU,CAAI,WAAW,cAAW,EAAE,SAAS,CAAC,EAC3D,KAAK,EAAE,KAAK,iBAEZH,yCAAM,SAAS,EAAK,WAAW,WAAQ,gBACpC,QAAQ,KACPA,yCAAM,SAAS,EAAK,WAAW,iBAAc,gBAAG,WAAW,YAAQ,CACpE,YACI;gBACPA,yCAAM,SAAS,EAAK,WAAW,UAAO,gBACpCA,eAAC,eAAe,IAAC,SAAS,EAAK,WAAW,gBAAa,WAAI,YACtD,aACH,YACE,EACX;AACH,CAAC;;;;"}