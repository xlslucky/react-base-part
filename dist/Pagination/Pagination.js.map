{"version":3,"file":"Pagination.js","sources":["../../src/Pagination/Pagination.tsx"],"sourcesContent":["import React from 'react'\nimport classnames from 'classnames'\n\nimport { PaginationProps, BasePaginationProps } from './Pagination.types'\n\nimport {\n  IconArrowLeftLine,\n  IconArrowRightLine,\n  IconDoubleLeft,\n  IconDoubleRight,\n} from '../components/Icons'\n\nimport './Pagination.scss'\nimport { PREFIX_CLASS } from '../constants'\nimport useBasePage from './useBasePage'\n\nfunction BasePagination({\n  prefixCls,\n  className,\n  disabled,\n  size,\n  totalPage,\n  pageNo,\n  handleLeftBtn,\n  handleRightBtn,\n  onChangeItem,\n}: BasePaginationProps) {\n  const data = useBasePage(pageNo, totalPage)\n  const { hasLeft, centerStartNo, centerEndNo, hasRight } = data\n\n  function handleLeftMore() {\n    let newPageNo = pageNo - 5\n    if (newPageNo < 1) {\n      newPageNo = 1\n    }\n    onChangeItem(newPageNo)\n  }\n\n  function handleRightMore() {\n    let newPageNo = pageNo + 5\n    if (newPageNo > totalPage) {\n      newPageNo = totalPage\n    }\n    onChangeItem(newPageNo)\n  }\n\n  function renderItem(num: number) {\n    return (\n      <span\n        key={num}\n        className={classnames(`${prefixCls}-pagination-item`, {\n          [`${prefixCls}-pagination-item-active`]: pageNo === num,\n          [`${prefixCls}-pagination-item-disabled`]: disabled,\n        })}\n        onClick={() => onChangeItem(num)}\n      >\n        {num}\n      </span>\n    )\n  }\n\n  return (\n    <div\n      className={classnames(\n        `${prefixCls}-pagination`,\n        { [`${prefixCls}-pagination-size-sm`]: size === 'small' },\n        className\n      )}\n    >\n      <span\n        className={classnames(`${prefixCls}-pagination-item`, {\n          [`${prefixCls}-pagination-item-not-allowed`]: pageNo === 1,\n          [`${prefixCls}-pagination-item-disabled`]: disabled,\n        })}\n        onClick={handleLeftBtn}\n      >\n        <IconArrowLeftLine />\n      </span>\n\n      {hasLeft ? renderItem(1) : null}\n      {hasLeft ? (\n        <span\n          onClick={handleLeftMore}\n          className={`${prefixCls}-pagination-item-jump`}\n        >\n          <IconDoubleLeft\n            className={`${prefixCls}-pagination-item-jump-icon`}\n          />\n          <span className={`${prefixCls}-pagination-item-more`}>···</span>\n        </span>\n      ) : null}\n\n      {new Array(centerEndNo - centerStartNo + 1)\n        .fill(undefined)\n        .map((_, i) => {\n          const num = centerStartNo + i\n          return renderItem(num)\n        })}\n\n      {hasRight ? (\n        <span\n          onClick={handleRightMore}\n          className={`${prefixCls}-pagination-item-jump`}\n        >\n          <IconDoubleRight\n            className={`${prefixCls}-pagination-item-jump-icon`}\n          />\n          <span className={`${prefixCls}-pagination-item-more`}>···</span>\n        </span>\n      ) : null}\n      {hasRight ? renderItem(totalPage) : null}\n\n      <span\n        className={classnames(`${prefixCls}-pagination-item`, {\n          [`${prefixCls}-pagination-item-not-allowed`]: pageNo === totalPage,\n          [`${prefixCls}-pagination-item-disabled`]: disabled,\n        })}\n        onClick={handleRightBtn}\n      >\n        <IconArrowRightLine />\n      </span>\n    </div>\n  )\n}\n\nconst Pagination: React.FC<PaginationProps> = ({\n  disabled,\n  className,\n  pageNo,\n  pageSize,\n  total,\n  onChange,\n  size = 'default',\n  prefixCls = PREFIX_CLASS,\n}) => {\n  const [innerPageNo, setInnerPageNo] = React.useState(pageNo)\n  const [innerPageSize, setInnerPageSize] = React.useState(pageSize)\n\n  React.useEffect(() => {\n    setInnerPageNo(pageNo)\n  }, [pageNo])\n\n  React.useEffect(() => {\n    setInnerPageSize(pageSize)\n  }, [pageSize])\n\n  function updateData(data: Record<string, number>) {\n    if (data.pageNo) {\n      setInnerPageNo(data.pageNo)\n    }\n    if (data.pageSize) {\n      setInnerPageSize(data.pageSize)\n    }\n    if (typeof onChange === 'function') {\n      onChange(data.pageNo || innerPageNo, data.pageSize || innerPageSize)\n    }\n  }\n\n  const totalPage = Math.ceil(total / innerPageSize)\n\n  if (totalPage <= 1) {\n    return null\n  }\n\n  function handleLeftBtn() {\n    if (innerPageNo > 1 && !disabled) {\n      updateData({\n        pageNo: innerPageNo - 1,\n      })\n    }\n  }\n\n  function handleRightBtn() {\n    if (innerPageNo < totalPage && !disabled) {\n      updateData({\n        pageNo: innerPageNo + 1,\n      })\n    }\n  }\n\n  function onChangeItem(num: number) {\n    if (innerPageNo !== num && !disabled) {\n      updateData({\n        pageNo: num,\n      })\n    }\n  }\n\n  return (\n    <BasePagination\n      prefixCls={prefixCls}\n      className={className}\n      disabled={disabled}\n      size={size}\n      totalPage={totalPage}\n      pageNo={innerPageNo}\n      handleLeftBtn={handleLeftBtn}\n      handleRightBtn={handleRightBtn}\n      onChangeItem={onChangeItem}\n    />\n  )\n}\n\nexport default Pagination\n"],"names":["_jsx","_jsxs","PREFIX_CLASS","React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,SAAS,cAAc,CAAC,EAUF;;QATpB,SAAS,eAAA,EACT,SAAS,eAAA,EACT,QAAQ,cAAA,EACR,IAAI,UAAA,EACJ,SAAS,eAAA,EACT,MAAM,YAAA,EACN,aAAa,mBAAA,EACb,cAAc,oBAAA,EACd,YAAY,kBAAA;IAEZ,IAAM,IAAI,GAAG,WAAW,CAAC,MAAM,EAAE,SAAS,CAAC,CAAA;IACnC,IAAA,OAAO,GAA2C,IAAI,QAA/C,EAAE,aAAa,GAA4B,IAAI,cAAhC,EAAE,WAAW,GAAe,IAAI,YAAnB,EAAE,QAAQ,GAAK,IAAI,SAAT,CAAS;IAE9D,SAAS,cAAc;QACrB,IAAI,SAAS,GAAG,MAAM,GAAG,CAAC,CAAA;QAC1B,IAAI,SAAS,GAAG,CAAC,EAAE;YACjB,SAAS,GAAG,CAAC,CAAA;SACd;QACD,YAAY,CAAC,SAAS,CAAC,CAAA;KACxB;IAED,SAAS,eAAe;QACtB,IAAI,SAAS,GAAG,MAAM,GAAG,CAAC,CAAA;QAC1B,IAAI,SAAS,GAAG,SAAS,EAAE;YACzB,SAAS,GAAG,SAAS,CAAA;SACtB;QACD,YAAY,CAAC,SAAS,CAAC,CAAA;KACxB;IAED,SAAS,UAAU,CAAC,GAAW;;QAC7B,QACEA,yCAEE,SAAS,EAAE,UAAU,CAAI,SAAS,qBAAkB;gBAClD,GAAI,SAAS,4BAAyB,IAAG,MAAM,KAAK,GAAG;gBACvD,GAAI,SAAS,8BAA2B,IAAG,QAAQ;oBACnD,EACF,OAAO,EAAE,cAAM,OAAA,YAAY,CAAC,GAAG,CAAC,GAAA,gBAE/B,GAAG,KAPC,GAAG,CAQH,EACR;KACF;IAED,QACEC,yCACE,SAAS,EAAE,UAAU,CAChB,SAAS,gBAAa,YACvB,GAAI,SAAS,wBAAqB,IAAG,IAAI,KAAK,OAAO,OACvD,SAAS,CACV,iBAEDD,yCACE,SAAS,EAAE,UAAU,CAAI,SAAS,qBAAkB;oBAClD,GAAI,SAAS,iCAA8B,IAAG,MAAM,KAAK,CAAC;oBAC1D,GAAI,SAAS,8BAA2B,IAAG,QAAQ;wBACnD,EACF,OAAO,EAAE,aAAa,gBAEtBA,eAAC,iBAAiB,aAAG,YAChB,EAEN,OAAO,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,EAC9B,OAAO,IACNC,0CACE,OAAO,EAAE,cAAc,EACvB,SAAS,EAAK,SAAS,0BAAuB,iBAE9CD,eAAC,cAAc,IACb,SAAS,EAAK,SAAS,+BAA4B,WACnD;oBACFA,yCAAM,SAAS,EAAK,SAAS,0BAAuB,gDAAY,aAC3D,IACL,IAAI;YAEP,IAAI,KAAK,CAAC,WAAW,GAAG,aAAa,GAAG,CAAC,CAAC;iBACxC,IAAI,CAAC,SAAS,CAAC;iBACf,GAAG,CAAC,UAAC,CAAC,EAAE,CAAC;gBACR,IAAM,GAAG,GAAG,aAAa,GAAG,CAAC,CAAA;gBAC7B,OAAO,UAAU,CAAC,GAAG,CAAC,CAAA;aACvB,CAAC;YAEH,QAAQ,IACPC,0CACE,OAAO,EAAE,eAAe,EACxB,SAAS,EAAK,SAAS,0BAAuB,iBAE9CD,eAAC,eAAe,IACd,SAAS,EAAK,SAAS,+BAA4B,WACnD;oBACFA,yCAAM,SAAS,EAAK,SAAS,0BAAuB,gDAAY,aAC3D,IACL,IAAI,EACP,QAAQ,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,IAAI,EAExCA,yCACE,SAAS,EAAE,UAAU,CAAI,SAAS,qBAAkB;oBAClD,GAAI,SAAS,iCAA8B,IAAG,MAAM,KAAK,SAAS;oBAClE,GAAI,SAAS,8BAA2B,IAAG,QAAQ;wBACnD,EACF,OAAO,EAAE,cAAc,gBAEvBA,eAAC,kBAAkB,aAAG,YACjB,aACH,EACP;AACH,CAAC;AAED,IAAM,UAAU,GAA8B,UAAC,EAS9C;QARC,QAAQ,cAAA,EACR,SAAS,eAAA,EACT,MAAM,YAAA,EACN,QAAQ,cAAA,EACR,KAAK,WAAA,EACL,QAAQ,cAAA,EACR,YAAgB,EAAhB,IAAI,mBAAG,SAAS,KAAA,EAChB,iBAAwB,EAAxB,SAAS,mBAAGE,kBAAY,KAAA;IAElB,IAAA,KAAgCC,cAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,EAArD,WAAW,QAAA,EAAE,cAAc,QAA0B,CAAA;IACtD,IAAA,KAAoCA,cAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAA3D,aAAa,QAAA,EAAE,gBAAgB,QAA4B,CAAA;IAElEA,cAAK,CAAC,SAAS,CAAC;QACd,cAAc,CAAC,MAAM,CAAC,CAAA;KACvB,EAAE,CAAC,MAAM,CAAC,CAAC,CAAA;IAEZA,cAAK,CAAC,SAAS,CAAC;QACd,gBAAgB,CAAC,QAAQ,CAAC,CAAA;KAC3B,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAA;IAEd,SAAS,UAAU,CAAC,IAA4B;QAC9C,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;SAC5B;QACD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;SAChC;QACD,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;YAClC,QAAQ,CAAC,IAAI,CAAC,MAAM,IAAI,WAAW,EAAE,IAAI,CAAC,QAAQ,IAAI,aAAa,CAAC,CAAA;SACrE;KACF;IAED,IAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC,CAAA;IAElD,IAAI,SAAS,IAAI,CAAC,EAAE;QAClB,OAAO,IAAI,CAAA;KACZ;IAED,SAAS,aAAa;QACpB,IAAI,WAAW,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChC,UAAU,CAAC;gBACT,MAAM,EAAE,WAAW,GAAG,CAAC;aACxB,CAAC,CAAA;SACH;KACF;IAED,SAAS,cAAc;QACrB,IAAI,WAAW,GAAG,SAAS,IAAI,CAAC,QAAQ,EAAE;YACxC,UAAU,CAAC;gBACT,MAAM,EAAE,WAAW,GAAG,CAAC;aACxB,CAAC,CAAA;SACH;KACF;IAED,SAAS,YAAY,CAAC,GAAW;QAC/B,IAAI,WAAW,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE;YACpC,UAAU,CAAC;gBACT,MAAM,EAAE,GAAG;aACZ,CAAC,CAAA;SACH;KACF;IAED,QACEH,eAAC,cAAc,IACb,SAAS,EAAE,SAAS,EACpB,SAAS,EAAE,SAAS,EACpB,QAAQ,EAAE,QAAQ,EAClB,IAAI,EAAE,IAAI,EACV,SAAS,EAAE,SAAS,EACpB,MAAM,EAAE,WAAW,EACnB,aAAa,EAAE,aAAa,EAC5B,cAAc,EAAE,cAAc,EAC9B,YAAY,EAAE,YAAY,WAC1B,EACH;AACH,CAAC;;;;"}