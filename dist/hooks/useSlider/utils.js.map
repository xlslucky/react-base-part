{"version":3,"file":"utils.js","sources":["../../../src/hooks/useSlider/utils.ts"],"sourcesContent":["import { productFloat } from '../../utils/calculate'\nimport {\n  CalcMoveLeftProps,\n  CalcValueProps,\n  SliderCalcProps,\n} from './useSlider.types'\n\nconst NUMBER = 1000\n\nfunction calcMoveLeft({\n  railDom,\n  clientX,\n  excursion,\n  handleWidth,\n}: CalcMoveLeftProps) {\n  const { x: domX, width: domWidth } = railDom.getBoundingClientRect()\n  let moveLeft = clientX - excursion + handleWidth / 2 - domX\n  if (moveLeft < 0) {\n    moveLeft = 0\n  } else if (moveLeft > domWidth) {\n    moveLeft = domWidth\n  }\n  return moveLeft\n}\n\nfunction calcValue({ step, left, distanceWidth }: CalcValueProps) {\n  // 划过整倍数剩下的距离\n  const remainderWidth = left % distanceWidth\n  // 划过多少个单元格\n  let hoverCells = (left - remainderWidth) / distanceWidth\n  // 划过下一个单元格超过一半 就进入下一个\n  if (Boolean(Math.round(remainderWidth / distanceWidth))) {\n    hoverCells = hoverCells + 1\n  }\n  const power = String(step).split('.')[1]\n    ? String(step).split('.')[1].length\n    : 0\n  const value = Number(productFloat(power)(hoverCells, step))\n  const harshLeft = Number(\n    ((hoverCells * distanceWidth * NUMBER) / NUMBER).toFixed(2)\n  )\n  return { value, harshLeft }\n}\n\nexport function sliderCalc({\n  railDom,\n  clientX,\n  excursion,\n  handleWidth,\n  step,\n  smooth,\n  distanceWidth,\n}: SliderCalcProps) {\n  const left = calcMoveLeft({\n    railDom,\n    clientX,\n    excursion,\n    handleWidth,\n  })\n  const { value, harshLeft } = calcValue({\n    step,\n    left,\n    distanceWidth,\n  })\n  const moveLeft = smooth ? left : harshLeft\n  return { value, moveLeft }\n}\n"],"names":["productFloat"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAM,MAAM,GAAG,IAAI,CAAA;AAEnB,SAAS,YAAY,CAAC,EAKF;QAJlB,OAAO,aAAA,EACP,OAAO,aAAA,EACP,SAAS,eAAA,EACT,WAAW,iBAAA;IAEL,IAAA,KAA+B,OAAO,CAAC,qBAAqB,EAAE,EAAzD,IAAI,OAAA,EAAS,QAAQ,WAAoC,CAAA;IACpE,IAAI,QAAQ,GAAG,OAAO,GAAG,SAAS,GAAG,WAAW,GAAG,CAAC,GAAG,IAAI,CAAA;IAC3D,IAAI,QAAQ,GAAG,CAAC,EAAE;QAChB,QAAQ,GAAG,CAAC,CAAA;KACb;SAAM,IAAI,QAAQ,GAAG,QAAQ,EAAE;QAC9B,QAAQ,GAAG,QAAQ,CAAA;KACpB;IACD,OAAO,QAAQ,CAAA;AACjB,CAAC;AAED,SAAS,SAAS,CAAC,EAA6C;QAA3C,IAAI,UAAA,EAAE,IAAI,UAAA,EAAE,aAAa,mBAAA;;IAE5C,IAAM,cAAc,GAAG,IAAI,GAAG,aAAa,CAAA;;IAE3C,IAAI,UAAU,GAAG,CAAC,IAAI,GAAG,cAAc,IAAI,aAAa,CAAA;;IAExD,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,aAAa,CAAC,CAAC,EAAE;QACvD,UAAU,GAAG,UAAU,GAAG,CAAC,CAAA;KAC5B;IACD,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UACpC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM;UACjC,CAAC,CAAA;IACL,IAAM,KAAK,GAAG,MAAM,CAACA,sBAAY,CAAC,KAAK,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAA;IAC3D,IAAM,SAAS,GAAG,MAAM,CACtB,CAAC,CAAC,UAAU,GAAG,aAAa,GAAG,MAAM,IAAI,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CAC5D,CAAA;IACD,OAAO,EAAE,KAAK,OAAA,EAAE,SAAS,WAAA,EAAE,CAAA;AAC7B,CAAC;SAEe,UAAU,CAAC,EAQT;QAPhB,OAAO,aAAA,EACP,OAAO,aAAA,EACP,SAAS,eAAA,EACT,WAAW,iBAAA,EACX,IAAI,UAAA,EACJ,MAAM,YAAA,EACN,aAAa,mBAAA;IAEb,IAAM,IAAI,GAAG,YAAY,CAAC;QACxB,OAAO,SAAA;QACP,OAAO,SAAA;QACP,SAAS,WAAA;QACT,WAAW,aAAA;KACZ,CAAC,CAAA;IACI,IAAA,KAAuB,SAAS,CAAC;QACrC,IAAI,MAAA;QACJ,IAAI,MAAA;QACJ,aAAa,eAAA;KACd,CAAC,EAJM,KAAK,WAAA,EAAE,SAAS,eAItB,CAAA;IACF,IAAM,QAAQ,GAAG,MAAM,GAAG,IAAI,GAAG,SAAS,CAAA;IAC1C,OAAO,EAAE,KAAK,OAAA,EAAE,QAAQ,UAAA,EAAE,CAAA;AAC5B;;;;"}